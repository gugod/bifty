<div id="bifty-all-tags">
  <% $cloud->html_and_css() |n %>
</div>
<%init>
use HTML::TagCloud;
my $tags = {};
my $posts = Bifty::Model::PostCollection->new();
$posts->unlimit();
while ( my $post = $posts->next ) {
    for( split( /\s+/, $post->tags() ) ) {
        $tags->{$_}++;
    }
}
my $cloud = HTML::TagCloud->new;
for (keys %$tags) {
    $cloud->add( $_, "/tags/$_", $tags->{$_} );
}
</%init>
